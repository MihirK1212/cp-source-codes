#include <iostream>
#include <vector>
using namespace std;

void partition(vector<int> &arr,int lb,int ub,vector<int> &ans)
{
        int pivot,i,j,temp;
        pivot=arr[lb];
        j=lb;
         
         for(i=lb+1;i<=ub;i++)
         {
             if(arr[i]<pivot)
             {
                 j++;
                 temp=arr[j];
                 arr[j]=arr[i];
                 arr[i]=temp;
              }
         }     
                
        temp=arr[j];
        arr[j]=arr[lb];
        arr[lb]=temp;
        
        ans[0]=j;
        
        for(i=j+1;i<=ub;i++)
        {
            if(arr[i]==pivot)
            {
                j++;
                temp=arr[j];
                arr[j]=arr[i];
                arr[i]=temp;
                
            }
        }
        
        ans[1]=j;
}


void quicksort(vector<int> &arr,int low,int high)
{
    int m1,m2;
    vector<int> ans(2);
    if(low>=high)
    {
        return;
    }
    else
    {
        int tempx,random;
        random=(low+high)/2;
        tempx=arr[low];
        arr[low]=arr[random];
        arr[random]=tempx;
        
        partition(arr,low,high,ans);
        m1=ans[0];
        m2=ans[1];
        
        quicksort(arr,low,m1-1);
        quicksort(arr,m2+1,high);
    }
}

 


int main()
{
    int n,g;
    cout<<"Enter number of elements:\n";
    cin>>n;
    vector<int> arr(n);
    cout<<"Enter elements of array\n";
    for(g=0;g<n;g++)
    {
        cin>>arr[g];
    }
    quicksort(arr,0,n-1);
    cout<<"Sorted array is:\n";
    for(g=0;g<n;g++)
    {
        cout<<arr[g]<<"\n";
    }
    
  return 0;
}
